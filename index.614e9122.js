function r(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=Array(t);e<t;e++)n[e]=r[e];return n}document.addEventListener("DOMContentLoaded",function(){var t=function(r){p+=r,d.textContent=p,r>=2048&&m.classList.remove("hidden")},e=function(){var t;g=((function(t){if(Array.isArray(t))return r(t)})(t=Array(y))||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(){return Array(y).fill(0)}),n(),n(),o()},n=function(){for(var r=[],t=0;t<y;t++)for(var e=0;e<y;e++)0===g[t][e]&&r.push({row:t,col:e});if(r.length>0){var n=r[Math.floor(Math.random()*r.length)];g[n.row][n.col]=.9>Math.random()?2:4,document.querySelector('[data-row="'.concat(n.row,'"][data-col="').concat(n.col,'"]')).classList.add("new-tile")}},o=function(){for(var r=0;r<y;r++)for(var t=0;t<y;t++){var e=g[r][t],n=document.querySelector("[data-row='".concat(r,"'][data-col='").concat(t,"']")),o=n.dataset.value;0!==e?(n.dataset.value=e,n.textContent=e,e===+o||n.classList.contains("new-tile")||n.classList.add("merged-tile")):(n.dataset.value=0,n.textContent="",n.classList.remove("merged-tile","new-tile"))}},a=function(r){var t=!1;if("ArrowLeft"===r){for(var e=0;e<g.length;e++){var a=c(g[e]);g[e]=a}t=!0}if("ArrowRight"===r){for(var l=0;l<g.length;l++){var d=i(g[l]);g[l]=d}t=!0}if("ArrowDown"===r||"ArrowUp"===r){for(var v=0;v<y;v++){for(var m=[],h=0;h<y;h++){var p=g[h][v];m.push(p)}for(var w="ArrowUp"===r?c(m):i(m),L=0;L<w.length;L++)g[L][v]=w[L]}t=!0}t&&(n(),o(),f()),"e"===r&&(u(),f()),"w"===r&&(s(),f())},i=function(r){for(var e=r.filter(function(r){return 0!==r}),n=[],o=e.length-1;o>=0;o--){var a=e[o];a===e[o-1]?(n.push(2*a),t(2*a),o--):n.push(a)}for(n.reverse();n.length<4;)n.unshift(0);return n},c=function(r){for(var e=r.filter(function(r){return 0!==r}),n=[],o=0;o<e.length;o++){var a=e[o];a===e[o+1]?(n.push(2*a),t(2*a),o++):n.push(a)}for(;n.length<4;)n.push(0);return n},s=function(){g=[[2,4,8,16],[32,64,128,256],[512,1024,2048,0],[0,1024,1024,4096]],o()},u=function(){g=[[2,4,2,4],[4,2,4,2],[2,4,8,4],[4,8,2,0]],o()},f=function(){for(var r=0;r<y;r++)for(var t=0;t<y;t++)if(0===g[r][t])return;for(var e=0;e<y-1;e++)for(var n=0;n<y;n++)if(g[e][n]===g[e+1][n])return;for(var o=0;o<y;o++)for(var a=0;a<y-1;a++)if(g[o][a]===g[o][a+1])return;h.classList.remove("hidden")},l=document.querySelector(".button.start"),d=document.querySelector(".game-score"),v=document.querySelector(".message-start"),m=document.querySelector(".message-win"),h=document.querySelector(".message-lose"),y=4,g=[],p=0;l.addEventListener("click",function(){e(),p=0,t(0),l.classList.remove("start"),l.classList.add("restart"),v.classList.add("hidden"),m.classList.add("hidden"),h.classList.add("hidden")}),document.addEventListener("keydown",function(r){return a(r.key)})});
//# sourceMappingURL=index.614e9122.js.map
